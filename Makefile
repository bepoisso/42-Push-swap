# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: bepoisso <bepoisso@student.42perpignan.    +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2024/08/21 18:34:37 by bepoisso          #+#    #+#              #
#    Updated: 2025/01/01 19:52:28 by bepoisso         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #


#_________________COLORS_________________

PURPLE = \033[0;35m
YELLOW = \033[0;93m
RESET = \033[0m

#_________________VARIABLE_________________

NAME = push_swap
CC= gcc
CFLAGS = -Wall -Wextra -Werror -g -I$(INC_DIR)

#_________________FILES_________________

SRC_DIR = ./srcs
OBJ_DIR = ./objs
INC_DIR = ./includes

SRC_FILES=\
			push_swap.c\
			push_operations.c\
			swap_operations.c\
			rotate_operations.c\
			rotate_operations_pt2.c\
			sort.c\
			sort_cost.c\
			sort_init.c\
			sort_target.c\
			sort_utils.c\
			utils.c\
			parser.c\
			error.c\

SRCS = $(addprefix $(SRC_DIR)/, $(SRC_FILES))
OBJS = $(addprefix $(OBJ_DIR)/, $(SRC_FILES:.c=.o))

#_________________RULES_________________

all: $(NAME)

$(NAME): $(OBJS)
	@make -C libft > /dev/null 2>&1
	@echo "Libft :					✅"
	@$(CC) $(CFLAGS) $(OBJS) -Llibft -lft -o $(NAME)
	@echo "Push_swap executable :			✅"
	@echo "$(PURPLE)__________             .__           _________                       $(RESET)"
	@echo "$(PURPLE)\______   \__ __  _____|  |__       /   _____/_  _  _______  ______  $(RESET)"
	@echo "$(PURPLE) |     ___/  |  \/  ___/  |  \      \_____  \\ \/ \/ /\__  \ \____ \ $(RESET)"
	@echo "$(PURPLE) |    |   |  |  /\___ \|   Y  \     /        \\     /  / __ \|  |_> >$(RESET)"
	@echo "$(PURPLE) |____|   |____//____  >___|  /____/_______  / \/\_/  (____  /   __/ $(RESET)"
	@echo "$(PURPLE)                     \/     \/_____/       \/              \/|__|    $(RESET)"
	@echo "$(PURPLE)                                                   By bepoisso       $(RESET)"

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c | $(OBJ_DIR)
	@$(CC) $(CFLAGS) -c $< -o $@

$(OBJ_DIR):
	@mkdir -p $(OBJ_DIR)

clean:
	@make clean -C libft > /dev/null 2>&1
	@echo "Libft clean :				✅"
	@rm -rf $(OBJ_DIR)
	@echo "Objs clean:				✅"

fclean: clean
	@make fclean -C libft > /dev/null 2>&1
	@echo "Libft fclean :				✅"
	@rm -f $(NAME)
	@echo "Push_swap remove :			✅"

re: fclean all

debug: re
	gdb -tui -q push_swap

val: re
	@valgrind --leak-check=full --track-origins=yes --show-leak-kinds=all ./push_swap 141 354 71 488 282 140 301 39 169 21 26 360 286 95 228 351 191 388 200 211 220 237 297 52 68 49 128 446 389 362 162 281 496 113 23 431 381 64 259 455 59 172 365 443 436 450 308 75 433 20 188 256 177 187 153 382 304 65 53 27 206 91 325 240 248 278 115 194 313 266 411 376 393 489 322 470 403 209 337 456 184 143 144 385 332 358 497 242 273 352 180 38 25 135 81 292 316 372 477 463 224 421 453 295 132 203 178 208 499 318 395 293 331 367 145 36 378 413 56 84 108 255 54 311 32 494 33 341 401 302 272 265 241 77 14 459 28 482 182 420 398 296 24 42 438 440 348 105 245 441 476 366 439 189 371 417 498 432 481 235 40 289 207 262 444 80 399 422 48 384 61 50 239 400 327 232 306 458 406 150 6 120 19 472 409 17 104 41 328 4 379 303 423 307 124 412 57 193 179 233 452 231 490 426 475 103 94 170 491 396 165 148 219 310 416 85 487 319 3 425 223 373 383 87 111 317 484 72 353 173 154 160 374 97 460 217 171 330 222 323 457 299 480 250 350 321 230 175 196 447 410 213 467 429 167 305 221 60 66 37 280 485 275 483 11 428 164 159 22 465 469 271 126 284 314 45 216 435 2 47 471 89 205 249 16 118 462 334 88 269 202 197 82 356 345 254 30 119 283 479 7 58 236 156 76 415 486 151 339 192 8 451 253 294 161 397 181 347 96 234 78 336 195 340 163 261 67 79 122 434 478 210 55 276 466 107 90 101 309 225 5 368 243 349 270 109 359 257 324 392 363 252 468 326 86 449 137 92 110 418 407 338 260 361 380 315 74 152 408 34 138 10 147 287 238 251 474 344 343 73 186 391 131 114 375 263 69 70 214 123 127 264 9 1 357 493 204 500 227 51 116 370 333 464 268 35 320 445 419 44 394 168 201 342 424 142 226 246 414 31 112 129 258 229 158 448 442 285 364 437 199 146 176 46 83 274 377 290 402 329 405 130 63 157 117 149 369 198 134 136 454 386 427 404 355 279 15 312 461 288 277 93 166 133 244 390 12 62 139 185 346 100 125 102 212 121 183 174 13 155 99 387 492 430 18 190 215 335 218 106 98 43 267 300 473 247 291 495 29 298

.PHONY: all clean fclean re
